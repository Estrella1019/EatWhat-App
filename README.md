# åƒå•¥APP (EatWhat App)

åŸºäº YOLO-World çš„æ™ºèƒ½é£Ÿè°±æ¨èåº”ç”¨

[![Flutter](https://img.shields.io/badge/Flutter-3.0+-blue.svg)](https://flutter.dev/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

## é¡¹ç›®ç®€ä»‹

åƒå•¥APPæ˜¯ä¸€ä¸ªåˆ›æ–°çš„æ™ºèƒ½é£Ÿè°±æ¨èåº”ç”¨ï¼Œé€šè¿‡AIè§†è§‰è¯†åˆ«æŠ€æœ¯å¸®åŠ©ç”¨æˆ·ï¼š
- ğŸ“¸ å®æ—¶è¯†åˆ«å†°ç®±ä¸­çš„é£Ÿæ
- ğŸ³ æ™ºèƒ½ç”Ÿæˆä¸ªæ€§åŒ–é£Ÿè°±
- ğŸ‘¥ ç®¡ç†å®¶åº­æˆå‘˜çš„é¥®é£Ÿåå¥½
- ğŸŒ æ”¯æŒå¤šè¯­è¨€ï¼ˆç®€ä½“ä¸­æ–‡ã€ç¹ä½“ä¸­æ–‡ã€è‹±æ–‡ï¼‰

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Flutter** - è·¨å¹³å°ç§»åŠ¨åº”ç”¨æ¡†æ¶
- **Provider** - çŠ¶æ€ç®¡ç†
- **SharedPreferences** - æœ¬åœ°æ•°æ®æŒä¹…åŒ–
- **Flutter Localizations** - å›½é™…åŒ–æ”¯æŒ
- **Dio** - ç½‘ç»œè¯·æ±‚
- **Image Picker** - å›¾ç‰‡é€‰æ‹©

### åç«¯ï¼ˆè§„åˆ’ä¸­ï¼‰
- **Python + FastAPI** - åç«¯APIæ¡†æ¶
- **YOLOv8 / YOLO-World** - é£Ÿæè¯†åˆ«æ¨¡å‹
- **Ollama + Qianwen** - åƒé—®å¤§æ¨¡å‹ï¼ˆé£Ÿè°±ç”Ÿæˆï¼‰
- **PostgreSQL** - æ•°æ®åº“

## ğŸ‘¥ å°ç»„åˆ†å·¥ (Team Members & Roles)

| å§“å (Name) | è§’è‰² (Role) | ä¸»è¦èŒè´£ (Responsibilities) |
| :--- | :--- | :--- |
| **Tao Yufei** | **é¡¹ç›®ç»ç† (PM)** / åç«¯ | éœ€æ±‚åˆ†æã€è¿›åº¦æŠŠæ§ã€FastAPI æ¶æ„æ­å»ºã€æ•°æ®åº“è®¾è®¡ |
| **Pan Jiaying** | **å‰ç«¯è´Ÿè´£äºº (Frontend Lead)** | Flutter ç§»åŠ¨ç«¯ UI å¼€å‘ã€çŠ¶æ€ç®¡ç† (Provider)ã€å‰åç«¯ API å¯¹æ¥ |
| **Jin Xinyi** | UI è®¾è®¡ / æµ‹è¯• | Figma åŸå‹è®¾è®¡ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–ã€QA æµ‹è¯•ä¸æ–‡æ¡£ç¼–å†™ |
| **Liu Xingzhe** | AI ç®—æ³•å·¥ç¨‹å¸ˆ | YOLOv8 é£Ÿæè¯†åˆ«æ¨¡å‹è®­ç»ƒã€Ollama/LLM æœåŠ¡éƒ¨ç½² |
| **Cheng Yuxiang** | åç«¯å¼€å‘ / è¿ç»´ | ç¼–å†™ API æ¥å£ã€Docker ç¯å¢ƒé…ç½®ã€æœåŠ¡å™¨éƒ¨ç½² |


## æ ¸å¿ƒåŠŸèƒ½

### 1. æ™ºèƒ½é£Ÿæè¯†åˆ« âœ…
- å®æ—¶ARæ‰«æè¯†åˆ«é£Ÿæ
- ç›¸å†Œå›¾ç‰‡è¯†åˆ«
- æ”¯æŒ50+ç§å¸¸è§é£Ÿæ
- é‡é‡å’Œä»½é‡ä¼°ç®—

### 2. ä¸ªæ€§åŒ–é£Ÿè°±æ¨è âœ…
- åŸºäºç°æœ‰é£Ÿæç”Ÿæˆé£Ÿè°±
- è€ƒè™‘è¿‡æ•åŸå’Œå£å‘³åå¥½
- æ”¯æŒå¤šäººç”¨é¤åœºæ™¯
- æ™ºèƒ½é£Ÿè°±æ›¿æ¢ï¼ˆæ— æ„Ÿæ›¿æ¢ï¼‰

### 3. å¤šç”¨æˆ·æ¡£æ¡ˆç®¡ç† âœ…
- å®¶åº­æˆå‘˜æ¡£æ¡ˆç®¡ç†
- ä¸ªæ€§åŒ–è¿‡æ•åŸè®¾ç½®
- å£å‘³åå¥½é…ç½®
- é»˜è®¤ç”¨é¤äººæ•°

### 4. è™šæ‹Ÿå†°ç®± âœ…
- é£Ÿæåº“å­˜ç®¡ç†
- è¿‡æœŸæé†’
- å¿«é€Ÿæ·»åŠ /åˆ é™¤é£Ÿæ
- é£Ÿæåˆ†ç±»å±•ç¤º

### 5. å›½é™…åŒ–æ”¯æŒ âœ…
- ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡
- ğŸ‡­ğŸ‡° ç¹ä½“ä¸­æ–‡
- ğŸ‡ºğŸ‡¸ English
- åŠ¨æ€è¯­è¨€åˆ‡æ¢

## é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ config/           # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ theme.dart    # ä¸»é¢˜é…ç½®
â”œâ”€â”€ l10n/            # å›½é™…åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ app_zh.arb           # ç®€ä½“ä¸­æ–‡
â”‚   â”œâ”€â”€ app_zh_Hant.arb      # ç¹ä½“ä¸­æ–‡
â”‚   â”œâ”€â”€ app_en.arb           # è‹±æ–‡
â”‚   â””â”€â”€ app_localizations.dart
â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ user.dart    # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ pantry.dart  # è™šæ‹Ÿå†°ç®±æ¨¡å‹
â”‚   â””â”€â”€ food_portion_data.dart
â”œâ”€â”€ providers/       # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ user_provider.dart    # ç”¨æˆ·çŠ¶æ€
â”‚   â”œâ”€â”€ pantry_provider.dart  # å†°ç®±çŠ¶æ€
â”‚   â””â”€â”€ global_provider.dart  # å…¨å±€çŠ¶æ€
â”œâ”€â”€ services/        # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ storage_service.dart     # æœ¬åœ°å­˜å‚¨
â”‚   â””â”€â”€ pantry_service.dart      # å†°ç®±æœåŠ¡
â”œâ”€â”€ screens/         # é¡µé¢
â”‚   â”œâ”€â”€ home_screen.dart              # é¦–é¡µ
â”‚   â”œâ”€â”€ pantry_screen.dart            # è™šæ‹Ÿå†°ç®±
â”‚   â”œâ”€â”€ profile_screen.dart           # ä¸ªäººæ¡£æ¡ˆ
â”‚   â”œâ”€â”€ profiles_management_screen.dart # æ¡£æ¡ˆç®¡ç†
â”‚   â”œâ”€â”€ food_portion_input_screen.dart  # ä»½é‡è¾“å…¥
â”‚   â””â”€â”€ food_weight_demo_screen.dart    # é‡é‡æ¼”ç¤º
â””â”€â”€ main.dart        # å…¥å£æ–‡ä»¶
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Flutter SDK >= 3.0.0
- Dart SDK >= 3.0.0

### å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/Estrella1019/EatWhat-App.git
cd EatWhat-App
```

2. å®‰è£…ä¾èµ–
```bash
flutter pub get
```

3. ç”Ÿæˆå›½é™…åŒ–æ–‡ä»¶
```bash
flutter gen-l10n
```

4. è¿è¡Œåº”ç”¨
```bash
flutter run
```

## æŠ€æœ¯äº®ç‚¹

### 1. YOLO-World é›¶æ ·æœ¬è¯†åˆ«
- é‡‡ç”¨ CVPR 2024 æœ€æ–°è®ºæ–‡æŠ€æœ¯
- å¼€æ”¾è¯æ±‡æ£€æµ‹ï¼Œæ— éœ€è®­ç»ƒå³å¯è¯†åˆ«æ–°é£Ÿæ
- è§£å†³é•¿å°¾é£Ÿæè¯†åˆ«é—®é¢˜
- æ”¯æŒå®æ—¶ARæ‰«æ

### 2. å®Œæ•´çš„å›½é™…åŒ–ç³»ç»Ÿ
- æ”¯æŒç®€ä½“ä¸­æ–‡ã€ç¹ä½“ä¸­æ–‡ã€è‹±æ–‡
- åŠ¨æ€è¯­è¨€åˆ‡æ¢
- æœ¬åœ°åŒ–å­˜å‚¨
- ä¿®å¤ç¹ä½“ä¸­æ–‡ Locale é—®é¢˜ï¼ˆä½¿ç”¨ `Locale.fromSubtags`ï¼‰

### 3. æ™ºèƒ½é£Ÿè°±ç”Ÿæˆ
- åƒé—®å¤§æ¨¡å‹é©±åŠ¨
- è€ƒè™‘è¿‡æ•åŸå’Œå£å‘³åå¥½
- æ”¯æŒå•æ¡é£Ÿè°±æ›¿æ¢ï¼ˆæ— æ„Ÿæ›¿æ¢ï¼‰
- é£Ÿè°±ç¼“å­˜æœºåˆ¶

### 4. å¤šç”¨æˆ·æ¡£æ¡ˆç®¡ç†
- æ”¯æŒå®¶åº­æˆå‘˜ç®¡ç†
- ä¸ªæ€§åŒ–è®¾ç½®
- æ•°æ®æŒä¹…åŒ–

### APIæµç¨‹ï¼ˆåŒ¹é…åç«¯è®¾è®¡ï¼‰

**ä¸¤æ­¥æµç¨‹ï¼š**
1. **è¯†åˆ«é£Ÿæ**: `POST /api/identify` - ä¸Šä¼ å›¾ç‰‡ï¼Œè¿”å›é£Ÿæåˆ—è¡¨
2. **ç”Ÿæˆé£Ÿè°±**: `POST /api/generate_recipes` - æ ¹æ®é£Ÿæç”Ÿæˆé£Ÿè°±

**å…¶ä»–æ¥å£ï¼š**
- `POST /api/get_one_recipe` - è·å–å•ä¸ªé£Ÿè°±ï¼ˆæ— æ„Ÿæ›¿æ¢ï¼‰
- `POST /api/user/profile` - åˆ›å»º/æ›´æ–°ç”¨æˆ·æ¡£æ¡ˆ
- `GET /api/user/profile/{userId}` - è·å–ç”¨æˆ·æ¡£æ¡ˆ
- `GET /api/user/history/{userId}` - è·å–ç”¨æˆ·å†å²è®°å½•

### æ•°æ®æ¨¡å‹

**Ingredientï¼ˆé£Ÿæï¼‰**
```json
{
  "name": "ç•ªèŒ„",
  "count": 2,
  "confidence": 0.95,
  "bbox": [x, y, width, height]
}
```

**IdentifyResultï¼ˆè¯†åˆ«ç»“æœï¼‰**
```json
{
  "ingredients": [...],
  "total_items": 4,
  "image_hash": "abc123"
}
```

**Recipeï¼ˆé£Ÿè°±ï¼‰** - ä¿æŒä¸å˜

## è¿è¡Œé¡¹ç›®

### 1. å®‰è£…ä¾èµ–
```bash
cd chisha_app
flutter pub get
```

### 2. è¿è¡Œé¡¹ç›®
```bash
flutter run
```

### 3. åˆ‡æ¢åˆ°çœŸå®API
å½“åç«¯APIå‡†å¤‡å¥½åï¼Œä¿®æ”¹ `lib/providers/global_provider.dart`:
```dart
// å°†
final MockApiService _apiService = MockApiService.getInstance();
// æ”¹ä¸º
final ApiService _apiService = ApiService.getInstance();
```

å¹¶åœ¨ `lib/services/api_service.dart` ä¸­ä¿®æ”¹ baseUrl:
```dart
static const String _baseUrl = 'http://your-backend-url:8000';
```

## ä¸»è¦ä¾èµ–

- provider: çŠ¶æ€ç®¡ç†
- shared_preferences: æœ¬åœ°å­˜å‚¨
- dio: ç½‘ç»œè¯·æ±‚
- image_picker: å›¾ç‰‡é€‰æ‹©
- flutter_image_compress: å›¾ç‰‡å‹ç¼©
- cached_network_image: å›¾ç‰‡ç¼“å­˜

## æµ‹è¯•è¦ç‚¹

### æ•°æ®æ¨¡å‹æµ‹è¯•
- [x] ä¼ å…¥ç©º JSON å­—æ®µä¸æŠ¥é”™
- [x] èƒ½ç”Ÿæˆé»˜è®¤å€¼

### çŠ¶æ€ç®¡ç†æµ‹è¯•
- [x] Provider è·¨é¡µé¢æ•°æ®å…±äº«
- [x] é‡å¯ååŠ è½½ä¸Šæ¬¡ä¿å­˜çš„è®¾ç½®

### å›¾ç‰‡å¤„ç†æµ‹è¯•
- [x] æ‹ç…§åŠŸèƒ½æ­£å¸¸
- [x] å‹ç¼©åå›¾ç‰‡ <500KB
- [x] æ§åˆ¶å°æ‰“å°å‹ç¼©ä¿¡æ¯

### APIæµ‹è¯•
- [x] Mockæ•°æ®æ­£å¸¸è¿”å›
- [x] ç½‘ç»œé”™è¯¯æç¤º
- [x] æ•°æ®ä¼ é€’åˆ°UIå±‚

### æ— æ„Ÿæ›¿æ¢æµ‹è¯•
- [x] ç‚¹å‡»åˆ·æ–°æŒ‰é’®
- [x] å•ä¸ªå¡ç‰‡ç¿»è½¬åŠ¨ç”»
- [x] å…¶ä»–å¡ç‰‡ä¸å—å½±å“
- [x] æ— å…¨å±Loading

## æ³¨æ„äº‹é¡¹

1. å½“å‰ä½¿ç”¨ Mock æ•°æ®ï¼Œå›¾ç‰‡URLä½¿ç”¨ picsum.photos å ä½å›¾
2. éœ€è¦åœ¨çœŸæœºä¸Šæµ‹è¯•æ‹ç…§åŠŸèƒ½
3. iOSéœ€è¦åœ¨ Info.plist ä¸­æ·»åŠ ç›¸æœºå’Œç›¸å†Œæƒé™
4. Androidéœ€è¦åœ¨ AndroidManifest.xml ä¸­æ·»åŠ ç›¸åº”æƒé™

## ä¸‹ä¸€æ­¥è®¡åˆ’

- [ ] é›†æˆçœŸå®åç«¯API
- [ ] æ·»åŠ LoadingåŠ¨ç”»ï¼ˆLottieï¼‰
- [ ] ä¼˜åŒ–åŠ¨ç”»æ•ˆæœ
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
